import os

Import('env')

# ================================================================

# works

# env.Append(CPPPATH=['toolkit'])
# env.Append(CPPPATH=['utils'])
# print('running sconscript from %s' % os.getcwd())
# env.SharedLibrary('toolkit', Glob("*/*.c"))


# ================================================================

# doesn't work:
#	EDIT: works now

env = env.Clone()

matches = []
for root, dirnames, filenames in os.walk(os.getcwd()):
	for dirname in dirnames:
		print('adding dir to path: %s' % dirname)
		env.Append(CPPPATH=[dirname])
		globStr = "%s/*.c*" % dirname
		matches.append(Glob(globStr))

print('src env CPPPATH:')
print(env['CPPPATH'])

env.SharedLibrary('../bin/toolkit', matches)

# Mkdir('bin')

# Copy('toolkit', '../bin')
# Copy('../bin', '../toolkit')

# Move("../bin/toolkit", "toolkit")
# Command("../bin/toolkit", "toolkit.*", Move("$TARGET", "$SOURCE"))

# Copy('../bin/toolkit', 'toolkit')

# ================================================================

# works (when above works)

# env.Program('main', ['program/program.c'], LIBS=['toolkit'], LIBPATH='./')
